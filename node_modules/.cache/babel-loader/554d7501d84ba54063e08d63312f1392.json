{"ast":null,"code":"import { defineComponent, computed } from 'vue';\nimport dayjs from 'dayjs';\nimport '../../../../hooks/index.mjs';\nimport '../../../time-picker/index.mjs';\nimport { hasClass } from '../../../../utils/dom.mjs';\nimport { coerceTruthyValueToArray } from '../../../../utils/util.mjs';\nimport { rangeArr } from '../../../time-picker/src/common/date-utils.mjs';\nimport { useLocaleInject } from '../../../../hooks/use-locale/index.mjs';\n\nvar datesInYear = function datesInYear(year, lang) {\n  var firstDay = dayjs(String(year)).locale(lang).startOf(\"year\");\n  var lastDay = firstDay.endOf(\"year\");\n  var numOfDays = lastDay.dayOfYear();\n  return rangeArr(numOfDays).map(function (n) {\n    return firstDay.add(n, \"day\").toDate();\n  });\n};\n\nvar script = defineComponent({\n  props: {\n    disabledDate: {\n      type: Function\n    },\n    parsedValue: {\n      type: Object\n    },\n    date: {\n      type: Object\n    }\n  },\n  emits: [\"pick\"],\n  setup: function setup(props, ctx) {\n    var _useLocaleInject = useLocaleInject(),\n        lang = _useLocaleInject.lang;\n\n    var startYear = computed(function () {\n      return Math.floor(props.date.year() / 10) * 10;\n    });\n\n    var getCellStyle = function getCellStyle(year) {\n      var style = {};\n      var today = dayjs().locale(lang.value);\n      style.disabled = props.disabledDate ? datesInYear(year, lang.value).every(props.disabledDate) : false;\n      style.current = coerceTruthyValueToArray(props.parsedValue).findIndex(function (_) {\n        return _.year() === year;\n      }) >= 0;\n      style.today = today.year() === year;\n      return style;\n    };\n\n    var handleYearTableClick = function handleYearTableClick(event) {\n      var target = event.target;\n\n      if (target.tagName === \"A\") {\n        if (hasClass(target.parentNode, \"disabled\")) return;\n        var year = target.textContent || target.innerText;\n        ctx.emit(\"pick\", Number(year));\n      }\n    };\n\n    return {\n      startYear: startYear,\n      getCellStyle: getCellStyle,\n      handleYearTableClick: handleYearTableClick\n    };\n  }\n});\nexport { script as default };","map":null,"metadata":{},"sourceType":"module"}