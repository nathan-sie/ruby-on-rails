{"ast":null,"code":"import { watch } from 'vue';\nimport { on } from '../../utils/dom.mjs';\nimport { EVENT_CODE } from '../../utils/aria.mjs';\nimport isServer from '../../utils/isServer.mjs';\nvar modalStack = [];\n\nvar closeModal = function closeModal(e) {\n  if (modalStack.length === 0) return;\n\n  if (e.code === EVENT_CODE.esc) {\n    e.stopPropagation();\n    var topModal = modalStack[modalStack.length - 1];\n    topModal.handleClose();\n  }\n};\n\nvar useModal = function useModal(instance, visibleRef) {\n  watch(function () {\n    return visibleRef.value;\n  }, function (val) {\n    if (val) {\n      modalStack.push(instance);\n    } else {\n      modalStack.splice(modalStack.findIndex(function (modal) {\n        return modal === instance;\n      }), 1);\n    }\n  });\n};\n\nif (!isServer) {\n  on(document, \"keydown\", closeModal);\n}\n\nexport { useModal as default };","map":null,"metadata":{},"sourceType":"module"}