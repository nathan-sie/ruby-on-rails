{"ast":null,"code":"//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from \"axios\";\nexport default {\n  name: \"user\",\n  data: function data() {\n    return {\n      form: {},\n      rules: {\n        email: [{\n          required: true,\n          message: \"请输入邮箱\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"请输入密码\",\n          trigger: \"blur\"\n        }]\n      },\n      error: ''\n    };\n  },\n  // created () {\n  //   this.checkSignIn()\n  // },\n  updated: function updated() {},\n  methods: {\n    // initialize(){\n    //   return axios\n    //       .get(\"users\")\n    //       .then(response => {\n    //         console.log(response.data);\n    //         this.desserts = response.data;\n    //       })\n    //       .catch(e => {\n    //         console.log(e);\n    //       });\n    // },\n    // signin() {\n    //   this.$http.plain.post('/signin', { email: this.form.email, password: this.form.password }).then(\n    //       response => this.signinSuccesful(response)\n    //   ).catch(\n    //       error => this.signinFailed(error)\n    //   )\n    // },\n    signin: function signin() {\n      var _this = this;\n\n      axios.post('/signin', {\n        email: this.form.email,\n        password: this.form.password\n      }).then(function (response) {\n        return _this.signinSuccesful(response);\n      })[\"catch\"](function (error) {\n        return _this.signinFailed(error);\n      });\n    },\n    signinSuccesful: function signinSuccesful(response) {\n      if (response.status === 0) {\n        this.signinFailed(response);\n        return;\n      }\n\n      console.log(response.data);\n      this.$router.replace('/home');\n    },\n    signinFailed: function signinFailed(error) {\n      console.log(error); // this.error = (error.response && error.response.data && error.response.data.error) || ''\n    },\n    checkSignedIn: function checkSignedIn() {\n      if (localStorage.signedIn) {\n        this.$router.replace('/home');\n      }\n    }\n  }\n};","map":{"version":3,"sources":["user.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,OAAA,KAAA,MAAA,OAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,EADA;AAEA,MAAA,KAAA,EAAA;AACA,QAAA,KAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,OAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA,CADA;AAIA,QAAA,QAAA,EAAA,CACA;AAAA,UAAA,QAAA,EAAA,IAAA;AAAA,UAAA,OAAA,EAAA,OAAA;AAAA,UAAA,OAAA,EAAA;AAAA,SADA;AAJA,OAFA;AAUA,MAAA,KAAA,EAAA;AAVA,KAAA;AAYA,GAfA;AAgBA;AACA;AACA;AACA,EAAA,OAnBA,qBAmBA,CAEA,CArBA;AAsBA,EAAA,OAAA,EAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAA,MAnBA,oBAmBA;AAAA;;AACA,MAAA,KAAA,CACA,IADA,CACA,SADA,EACA;AAAA,QAAA,KAAA,EAAA,KAAA,IAAA,CAAA,KAAA;AAAA,QAAA,QAAA,EAAA,KAAA,IAAA,CAAA;AAAA,OADA,EACA,IADA,CAEA,UAAA,QAAA;AAAA,eAAA,KAAA,CAAA,eAAA,CAAA,QAAA,CAAA;AAAA,OAFA,WAIA,UAAA,KAAA;AAAA,eAAA,KAAA,CAAA,YAAA,CAAA,KAAA,CAAA;AAAA,OAJA;AAMA,KA1BA;AA2BA,IAAA,eA3BA,2BA2BA,QA3BA,EA2BA;AACA,UAAA,QAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,aAAA,YAAA,CAAA,QAAA;AACA;AACA;;AAEA,MAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,IAAA;AACA,WAAA,OAAA,CAAA,OAAA,CAAA,OAAA;AACA,KAnCA;AAoCA,IAAA,YApCA,wBAoCA,KApCA,EAoCA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,EADA,CAEA;AACA,KAvCA;AAwCA,IAAA,aAxCA,2BAwCA;AACA,UAAA,YAAA,CAAA,QAAA,EAAA;AACA,aAAA,OAAA,CAAA,OAAA,CAAA,OAAA;AACA;AACA;AA5CA;AAtBA,CAAA","sourcesContent":["<template>\n  <div>\n  <div class=\"background\" style=\"width: 100%; height: 100vh; overflow: hidden\">\n    <div class=\"containbox\" style=\"width: 550px; margin: 150px auto\">\n      <div style=\"width: 400px; margin: 100px auto\">\n        <div style=\"color: #cccccc; font-size: 30px; text-align: center; padding: 30px 0\">SignIn</div>\n        <el-form @submit.prevent=\"signin\" :rules=\"rules\">\n          <div v-if=\"error\">{{ error }}</div>\n          <el-form-item prop=\"email\">\n            <el-input prefix-icon=\"el-icon-user-solid\" v-model=\"form.email\"></el-input>\n          </el-form-item>\n          <el-form-item prop=\"password\">\n            <el-input prefix-icon=\"el-icon-lock\" v-model=\"form.password\" show-password></el-input>\n          </el-form-item>\n          <el-form-item style=\"margin: 0px auto; text-align: center\">\n            <el-button style=\"width: 100%; float: inside;\" type=\"primary\" @click=\"signin\">登 录</el-button>\n          </el-form-item>\n          <!-- <el-link href=\"register\" style=\"padding-top: 10px; color: #cccccc\">没有账户？注册</el-link> -->\\\n          <div style=\"padding-bottom: 45px\"></div>\n        </el-form>\n      </div>\n    </div>\n  </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name:\"user\",\n  data() {\n    return {\n      form: {},\n      rules: {\n        email: [\n          {required: true, message: \"请输入邮箱\", trigger: \"blur\"}\n        ],\n        password: [\n          {required: true, message: \"请输入密码\", trigger: \"blur\"}\n        ]\n      },\n      error: ''\n    }\n  },\n  // created () {\n  //   this.checkSignIn()\n  // },\n  updated () {\n\n  },\n  methods: {\n    // initialize(){\n    //   return axios\n    //       .get(\"users\")\n    //       .then(response => {\n    //         console.log(response.data);\n    //         this.desserts = response.data;\n    //       })\n    //       .catch(e => {\n    //         console.log(e);\n    //       });\n    // },\n    // signin() {\n    //   this.$http.plain.post('/signin', { email: this.form.email, password: this.form.password }).then(\n    //       response => this.signinSuccesful(response)\n    //   ).catch(\n    //       error => this.signinFailed(error)\n    //   )\n    // },\n    signin(){\n      axios\n        .post('/signin',{ email : this.form.email, password : this.form.password}).then(\n            response=>this.signinSuccesful(response))\n      .catch(\n          error => this.signinFailed(error)\n      )\n    },\n    signinSuccesful ( response ) {\n      if (response.status === 0) {\n        this.signinFailed(response)\n        return\n      }\n\n      console.log(response.data)\n      this.$router.replace('/home')\n    },\n    signinFailed ( error ) {\n      console.log(error)\n      // this.error = (error.response && error.response.data && error.response.data.error) || ''\n    },\n    checkSignedIn () {\n      if ( localStorage.signedIn ) {\n        this.$router.replace('/home')\n      }\n    }\n  }\n}\n\n</script>\n\n<style scoped>\n\n.background{\n  /*background-image: url(\"\");*/\n  position: fixed;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-size: cover;\n  overflow: hidden;\n  height: 100%;\n  width: 100%;\n  position: page;\n  top:0px;\n  left:0px;\n  right:0px;\n  bottom:0px;\n}\n.containbox{\n  background-color: rgba(0,0,0,.5);\n  border-radius: 20px;\n  backdrop-filter: blur(3px);\n}\n\n</style>"],"sourceRoot":"app/javascript/packs/components"},"metadata":{},"sourceType":"module"}